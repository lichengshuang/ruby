<!DOCTYPE html>
<html lang="en">
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
		<meta http-equiv="Content-Language" content="zh-CN"/>
		<title>Servlets Server HTTP Response</title>
		<meta name="Keywords" content="Servlets,Servlets Server HTTP Response,Servlets-"/>
		<meta name="Description" content="Servlets Server HTTP Response"/>
		<!--//tutorial/base.view.html-->
		<script type="text/javascript" src="../static/js/jquery.js"></script>
		<link rel="stylesheet" href="http://www.yiibai.com/static/redactor/css/redactor.css" />
		<script src="http://www.yiibai.com/static/redactor/redactor.js"></script>
		<link href="../static/css/bootstrap.css" rel="stylesheet" type="text/css" />
		<link href="../static/css/tutorial.css" rel="stylesheet" type="text/css" />
		<script type="text/javascript">
			$(document).ready(function() {
				var buttons = ['formatting', '|', 'bold', 'italic', '|', 'button1'];
				$('#comment_textarea').redactor({
					focus: false, 
					buttons: buttons, 					
				});
			});
		</script>
		<style>
			table {
				border: 1px solid #DDD;
				border-collapse: separate;
				border-left: 0;
				-webkit-border-radius: 4px;
				-moz-border-radius: 4px;
				border-radius: 4px;
				max-width: 90%;
				background-color: transparent;
				border-collapse: collapse;
				border-spacing: 0;
			}
			thead {
				display: table-header-group;
				vertical-align: middle;
				border-color: inherit;
				border-left: 1px solid #DDD;
			}
			th {
				font-weight: bold;
				border-left: 1px solid #DDD;
				line-height: 28px;
			}
			tbody {
				display: table-row-group;
				vertical-align: middle;
				border-color: inherit;
			}
			tr {
				display: table-row;
				vertical-align: inherit;
				border-color: inherit;
				border-left: 1px solid #DDD;
			}
			td {
				padding: 8px;
				line-height: 20px;
				text-align: left;
				vertical-align: top;
				border-top: 1px solid #DDD;
				border-left: 1px solid #DDD;
			}
		</style>
	</head>
	<body>
		<div class="header">
	<a href="../index.html" class="logo"> <img src="../static/img/logo.png" /> </a>
	<span class="input-append search" style="">
	<form action="http://www.yiibai.com/search" method="get" style="margin: 0px;">
		<input id="prependedDropdownButton" type="text" name="kw" class="span4 pub-share">
		<button class="btn pub-share" type="submit">
			搜 索
		</button>
	</form>
	</span>
	<a class="btn btn-success" href="../index.php?r=tutorial%252Fcreate">发起分享</a>
		<a href="../index.php?r=login" class="user-login">登陆</a>
	<a href="../index.php?r=register" class="user-register">注册</a>
	
		</span>
</div>


		<div class="header-nav">	<div id="menu" class="menu">		<div class="main-menu" style="clear:both;">			<ul>				<li class="">					<a href="../index.html" target="_self">首页</a>				</li>				<li id="all-category-e" class="all-category current">					<a href="http://www.yiibai.com/tutorial"  class="all-category current">教程</a>				</li>				<li>					<a href="http://www.yiibai.com/question">问题求助</a>				</li>				<li class="last">					<a class="last" href="http://www.yiibai.com/tag">标签</a>				</li>			</ul>		</div>	</div></div>
		<div class="exp-category-container">
	<ul class="exp-category-list clearfix">
		<li>
			<a href="../java" target="_blank" title="Java教程">Java</a>
		</li>
		<li>
			<a href="../python" target="_blank" title="Python教程">Python</a>
		</li>
		<li>
			<a href="../php" target="_blank" title="php教程">PHP</a>
		</li>
		<li>
			<a href="../perl" target="_blank" title="perl教程">Perl</a>
		</li>
		<li>
			<a href="../ruby.2" target="_blank" title="Ruby教程">Ruby</a>
		</li>
		<li>
			<a href="../mysql" target="_blank" title="MySQL教程">MySQL</a>
		</li>
		<li>
			<a href="../sql" target="_blank" title="SQL教程">SQL</a>
		</li>
		<li>
			<a href="../jdbc" target="_blank" title="JDBC教程">JDBC</a>
		</li>
		<li>
			<a href="../go" target="_blank" title="GO教程">Go语言</a>
		</li>
		
	</ul>
</div>
		<div class="container-fluid" style="width: 1080px;margin: auto; margin-top: 16px;">
			<div class="path" style="padding-top:2px; margin-top: 0px;margin-bottom: 14px;clear: both;">
				当前位置：<a href="../index.html">首页</a> » <a href="index.html">Servlet教程</a> » 
			</div>
			<div class="row-fluid">
				<div class="well span3" style="width:260px;">
					<ul class="nav nav-list">
						<li class="">
							<a href="index.html" style="font-size:12pt;">Servlet教程</a>
						</li>
						<li class="divider" style="margin-top: 0px;"></li>
																		<li style="padding-left: 8px;">
														<a href="servlets-overview.html">Servlets 概述</a>
													</li>
																								<li style="padding-left: 8px;">
														<a href="servlets-environment-setup.html">Servlets环境设置</a>
													</li>
																								<li style="padding-left: 8px;">
														<a href="servlets-life-cycle.html">Servlets Life Cycle</a>
													</li>
																								<li style="padding-left: 8px;">
														<a href="servlets-first-example.html">Servlets First Examples</a>
													</li>
																								<li style="padding-left: 8px;">
														<a href="servlets-form-data.html">Servlets Form Data</a>
													</li>
																								<li style="padding-left: 8px;">
														<a href="servlets-client-reques.html">Servlets Client HTTP Request</a>
													</li>
																								<li class="active" style="font-size:11pt;padding-left: 8px;">
														<a href="servlets-server-response.html">Servlets Server HTTP Response</a>
													</li>
																								<li style="padding-left: 8px;">
														<a href="servlets-http-status-codes.html">Servlets HTTP 1.1 Status Codes</a>
													</li>
																								<li style="padding-left: 8px;">
														<a href="servlets-writing-filters.html">Servlets Filters</a>
													</li>
																								<li style="padding-left: 8px;">
														<a href="servlets-exception-handling.html">Servlet Exception Handling</a>
													</li>
																								<li style="padding-left: 8px;">
														<a href="servlets-cookies-handling.html">Servlets Cookies Handling</a>
													</li>
																								<li style="padding-left: 8px;">
														<a href="servlets-session-tracking.html">Servlet Session Tracking</a>
													</li>
																								<li style="padding-left: 8px;">
														<a href="servlets-database-access.html">Servlets - Database Access</a>
													</li>
																								<li style="padding-left: 8px;">
														<a href="servlets-file-uploading.html">Servlet File Uploading</a>
													</li>
																								<li style="padding-left: 8px;">
														<a href="servlets-handling-date.html">Servlet Date Handling</a>
													</li>
																								<li style="padding-left: 8px;">
														<a href="servlets-page-redirec.html">Servlets Page Redirection</a>
													</li>
																								<li style="padding-left: 8px;">
														<a href="servlets-hits-counter.html">Servlets Page Hits Counter</a>
													</li>
																								<li style="padding-left: 8px;">
														<a href="servlets-auto-refres.html">Auto Page Refresh using Servlets</a>
													</li>
																								<li style="padding-left: 8px;">
														<a href="servlets-sending-email.html">Sending email using Servlets</a>
													</li>
																								<li style="padding-left: 8px;">
														<a href="servlets-packaging.html">Servlets Packaging</a>
													</li>
																								<li style="padding-left: 8px;">
														<a href="servlets-debugging.html">Servlets Debugging</a>
													</li>
																								<li style="padding-left: 8px;">
														<a href="servlets-internationalization.html">Servlets Internationalization| i18n| l10n| Servlets Localization</a>
													</li>
																								<li style="padding-left: 8px;">
														<a href="../index.html">Servlets Quick Guide</a>
													</li>
																								<li style="padding-left: 8px;">
														<a href="servlets-useful-resources.html">Servlets Useful Resources, Sites and Books</a>
													</li>
																	</ul>
				</div>
				<div class="span9" style="width:800px; margin-left:12px; padding: 0px; border: 1px solid #DDDDDD;float:left;">
					<div style="width: 760px;height:48px; padding: 2px 18px 2px 18px;text-align: left;border-bottom: 1px dashed #CCC;clear:both; ">
						<h1 style="font-size: 13.5pt;width: 645px;float:left; overflow: hidden;">Servlets - Server HTTP Response</h1>
						<span style="float:left;padding: 18px;margin-left: 12px;"><a href="servlets-server-response.html#comment" title="我要去评论">评论</a>&nbsp;&nbsp;<a href="http://www.yiibai.com/index.php?r=tutorial/updateVersion&id=3626" title="完善此教程实例">编辑</a></span>
						<input type="hidden" id="tid" value="3626"/>
					</div>

					<!--
					<div style="padding-left:24px; padding-top: 12px;padding-bottom: 2px;">
					<script type="text/javascript">
					<!--
					google_ad_client ="ca-pub-1090193214637198";
					/* yiibai上方 */
					google_ad_slot = "7899237394";
					google_ad_width = 728;
					google_ad_height = 90;
					//->
					</script>
					<script type="text/javascript"
					src="http://pagead2.googlesyndication.com/pagead/show_ads.js"></script>
					</div>
					-->
					<div id="baidu-ad" style="float:left;clear:both; width: 800px;padding-left:24px; padding-top: 6px;padding-bottom: 24px;">
						<script type="text/javascript">
						/*文章详细页上方628*90*/
						var cpro_id = "u1064372";
						</script>
						<script src="http://cpro.baidustatic.com/cpro/ui/c.js" type="text/javascript"></script>
						
					</div>
					<div style="padding:8px 22px 8px 24px;" id="content">
						<p>As discussed in previous chapter, when a Web server responds to a HTTP request to the browser, the response typically consists of a status line, some response headers, a blank line, and the document. A typical response looks like this:</p>
<pre class="prettyprint">
HTTP/1.1 200 OK
Content-Type: text/html
Header2: ...
...
HeaderN: ...
  (Blank Line)
&lt;!doctype ...&gt;
&lt;html&gt;
&lt;head&gt;...&lt;/head&gt;
&lt;body&gt;
...
&lt;/body&gt;
&lt;/html&gt;
</pre>
<p>The status line consists of the HTTP version (HTTP/1.1 in the example), a status code (200 in the example), and a very short message corresponding to the status code (OK in the example).</p>
<p>Following is a summary of the most useful HTTP 1.1 response headers which go back to the browser from web server side and you would use them very frequently in web programming:</p>
<table class="src">
<tr><th style="width:30%">Header</th><th>Description</th></tr>
<tr><td>Allow</td><td>This header specifies the request methods (GET, POST, etc.) that the server supports.</td></tr>
<tr><td>Cache-Control</td><td>This header specifies the circumstances in which the response document can safely be cached. It can have values <b>public, private</b> or <b>no-cache</b> etc. Public means document is cacheable, Private means document is for a single user and can only be stored in private (nonshared) caches and no-cache means document should never be cached.</td></tr>
<tr><td>Connection</td><td>This header  instructs the browser whether to use persistent in HTTP connections or not. A value of <b>close</b> instructs the browser not to use persistent HTTP connections and <b>keep-alive</b> means using persistent connections.</td></tr>
<tr><td>Content-Disposition</td><td>This header lets you request that the browser ask the user to save the response to disk in a file of the given name.</td></tr>
<tr><td>Content-Encoding</td><td>This header specifies the way in which the page was encoded during transmission.</td></tr>
<tr><td>Content-Language</td><td>This header signifies the language in which the document is written. For example en, en-us, ru, etc.</td></tr>
<tr><td>Content-Length</td><td>This header indicates the number of bytes in the response. This information is needed only if the browser is using a persistent (keep-alive) HTTP connection.</td></tr>
<tr><td>Content-Type</td><td>This header gives the MIME (Multipurpose Internet Mail Extension) type of the response document.</td></tr>
<tr><td>Expires</td><td>This header specifies the time at which the content should be considered out-of-date and thus no longer be cached.</td></tr>
<tr><td>Last-Modified</td><td>This header indicates when the document was last changed. The client can then cache the document and supply a date by an <b>If-Modified-Since</b> request header in later requests. </td></tr>
<tr><td>Location</td><td>This header should be included with all responses that have a status code in the 300s. This notifies the browser of the document address. The browser automatically reconnects to this location and retrieves the new document.</td></tr>
<tr><td>Refresh</td><td>This header specifies how soon the browser should ask for an updated page. You can specify time in number of seconds after which a page would be refreshed.</td></tr>
<tr><td>Retry-After</td><td>This header can be used in conjunction with a 503 (Service Unavailable) response to tell the client how soon it can repeat its request.</td></tr>
<tr><td>Set-Cookie</td><td>This header specifies a cookie associated with the page.</td></tr>
</table>
<h2>Methods to Set HTTP Response Header:</h2>
<p>There are following methods which can be used to set HTTP response header in your servlet program. These method are available with <i>HttpServletResponse</i> object.</p>
<table class="src">
<tr><th style="width:5%">S.N.</th><th>Method &amp; Description</th></tr>
<tr><td>1</td><td><b>String encodeRedirectURL(String url)</b><br />Encodes the specified URL for use in the sendRedirect method or, if encoding is not needed, returns the URL unchanged.</td></tr>
<tr><td>2</td><td><b>String encodeURL(String url)</b><br />Encodes the specified URL by including the session ID in it, or, if encoding is not needed, returns the URL unchanged.</td></tr>
<tr><td>3</td><td><b>boolean containsHeader(String name)</b><br />Returns a boolean indicating whether the named response header has already been set.</td></tr>
<tr><td>4</td><td><b>boolean isCommitted()</b><br />Returns a boolean indicating if the response has been committed.</td></tr>
<tr><td>5</td><td><b>void addCookie(Cookie cookie)</b><br />Adds the specified cookie to the response.</td></tr>
<tr><td>6</td><td><b>void addDateHeader(String name, long date)</b><br />Adds a response header with the given name and date-value.</td></tr>
<tr><td>7</td><td><b>void addHeader(String name, String value)</b><br />Adds a response header with the given name and value.</td></tr>
<tr><td>8</td><td><b>void addIntHeader(String name, int value)</b><br />Adds a response header with the given name and integer value.</td></tr>
<tr><td>9</td><td><b>void flushBuffer()</b><br />Forces any content in the buffer to be written to the client.</td></tr>
<tr><td>10</td><td><b>void reset()</b><br />Clears any data that exists in the buffer as well as the status code and headers.</td></tr>
<tr><td>11</td><td><b>void resetBuffer()</b><br />Clears the content of the underlying buffer in the response without clearing headers or status code.</td></tr>
<tr><td>12</td><td><b>void sendError(int sc)</b><br />Sends an error response to the client using the specified status code and clearing the buffer.</td></tr>
<tr><td>13</td><td><b>void sendError(int sc, String msg)</b><br />Sends an error response to the client using the specified status.</td></tr>
<tr><td>14</td><td><b>void sendRedirect(String location)</b><br />Sends a temporary redirect response to the client using the specified redirect location URL.</td></tr>
<tr><td>15</td><td><b>void setBufferSize(int size)</b><br />Sets the preferred buffer size for the body of the response.</td></tr>
<tr><td>16</td><td><b>void setCharacterEncoding(String charset)</b><br />Sets the character encoding (MIME charset) of the response being sent to the client, for example, to UTF-8.</td></tr>
<tr><td>17</td><td><b>void setContentLength(int len)</b><br />Sets the length of the content body in the response In HTTP servlets, this method sets the HTTP Content-Length header.</td></tr>
<tr><td>18</td><td><b>void setContentType(String type)</b><br />Sets the content type of the response being sent to the client, if the response has not been committed yet.</td></tr>
<tr><td>19</td><td><b>void setDateHeader(String name, long date)</b><br />Sets a response header with the given name and date-value.</td></tr>
<tr><td>20</td><td><b>void setHeader(String name, String value)</b><br /> Sets a response header with the given name and value.</td></tr>
<tr><td>21</td><td><b>void setIntHeader(String name, int value)</b><br />Sets a response header with the given name and integer value.</td></tr>
<tr><td>22</td><td><b>void setLocale(Locale loc)</b><br /> Sets the locale of the response, if the response has not been committed yet.</td></tr>
<tr><td>23</td><td><b>void setStatus(int sc)</b><br />Sets the status code for this response.</td></tr>
</table>
<h2>HTTP Header Response Example:</h2>
<p>You already have seen setContentType() method working in previous examples and following example would also use same method, additionally we would use <b>setIntHeader()</b> method to set <b>Refresh</b> header.</p>
<pre class="prettyprint">
// Import required java libraries
import java.io.*;
import javax.servlet.*;
import javax.servlet.http.*;
import java.util.*;
 
// Extend HttpServlet class
public class Refresh extends HttpServlet {
 
  // Method to handle GET method request.
  public void doGet(HttpServletRequest request,
                    HttpServletResponse response)
            throws ServletException, IOException
  {
      // Set refresh, autoload time as 5 seconds
      response.setIntHeader("Refresh", 5);
 
      // Set response content type
      response.setContentType("text/html");
 
      // Get current time
      Calendar calendar = new GregorianCalendar();
      String am_pm;
      int hour = calendar.get(Calendar.HOUR);
      int minute = calendar.get(Calendar.MINUTE);
      int second = calendar.get(Calendar.SECOND);
      if(calendar.get(Calendar.AM_PM) == 0)
        am_pm = "AM";
      else
        am_pm = "PM";
 
      String CT = hour+":"+ minute +":"+ second +" "+ am_pm;
    
      PrintWriter out = response.getWriter();
      String title = "Auto Refresh Header Setting";
      String docType =
      "&lt;!doctype html public \"-//w3c//dtd html 4.0 " +
      "transitional//en\"&gt;\n";
      out.println(docType +
        "&lt;html&gt;\n" +
        "&lt;head&gt;&lt;title&gt;" + title + "&lt;/title&gt;&lt;/head&gt;\n"+
        "&lt;body bgcolor=\"#f0f0f0\"&gt;\n" +
        "&lt;h1 align=\"center\"&gt;" + title + "&lt;/h1&gt;\n" +
        "&lt;p&gt;Current Time is: " + CT + "&lt;/p&gt;\n");
  }
  // Method to handle POST method request.
  public void doPost(HttpServletRequest request,
                     HttpServletResponse response)
      throws ServletException, IOException {
     doGet(request, response);
  }
}
</pre>
<p>Now calling the above servlet would display current system time after every 5 seconds as follows. Just run the servlet and wait to see the result:</p>
<table cellpadding="5" class="src">
<tr><td bgcolor="#f0f0f0">
<h1 align="center">Auto Refresh Header Setting</h1>
<p>Current Time is: 9:44:50 PM</p>
</td></tr>
</table>
					</div>
					<!--// google ad -->
					<div style="padding-left:24px; padding-top: 12px;padding-bottom: 2px;">
						<script type="text/javascript">
							<!--
							google_ad_client ="ca-pub-1090193214637198";
							/* yiibai下方 */
							google_ad_slot = "6494738921";
							google_ad_width = 728;
							google_ad_height = 90;
							//-->
						</script>
						<script type="text/javascript"
						src="http://pagead2.googlesyndication.com/pagead/show_ads.js"></script>
					</div>
				</div><!--/span-->
				<!--// demos -->
				
				<div class="span9" style="width:800px; margin:12px 8px 12px 12px; padding: 8px 22px 8px 24px; border: 1px solid #DDDDDD;float:right;">
					<div style="width: 740px;height: 48px; margin:0px; padding: 0px; border-bottom: 1px solid #DDDDDD;">
						<h2 style="float:left;font-size: 13pt;width:490px;">贡献/合作者</h2>
					</div>
					<div style="text-align: left;float:left;width:660px;">
						正在开放中...
					</div>
				</div>

				<div class="span9" style="width:800px; margin:12px 8px 12px 12px; padding:0px; float:right;">
					<div style="float:left;width:780px;height: 160px;clear:both;">
						<div style="float:left;width:40px;height: 160px;">
							<img src="http://www.yiibai.com/static/ico/deault_user_icon.gif" width="32px;" height="32px;"/>
						</div>
						<div style="float:left;width:680px;height: 160px; margin-left:12px; clear:right;">
							<form action="servlets-server-response.html" method="post">
								<a name="comment"></a>
								<textarea id="comment_textarea" name="comment_content" style="height: 120px;">&nbsp;</textarea>
								<input type="button" class="btn btn-success" id="comment_submit" value="提交评论"/><span id="submit_tips" style="margin-left: 22px;padding-top: 2px;" class=""></span>
							</form>
						</div>
					</div>
					<div style="clear: both;padding:14px;">&nbsp;</div>
					<h2 style="float:left;font-size: 13pt;width:780px;border-bottom: 1px solid #DDDDDD;">评论(0条)</h2>

					<div style="width:780px;  float: left;">
						<ul style="margin: 5px 0 15px 0;padding: 5px 0 5px 0px;">
														<li style="border-bottom: 1px dashed #ddd; margin-top: 8px;margin-bottom: 8px;">
								<p>
									<span style="font-size: 10.5pt;">还没有评论！</span>
								</p>
							</li>
														
						</ul>
					</div>
				</div>

			</div><!--/row-->
		</div>
		<!--/yb_content-->
<hr style="padding-top:0px;margin-top: 18px; border-bottom-color: #33;"/>
<div style="margin:auto; width: 960px; text-align: center; margin: 12px 0px 36px 0;">
	<span>Copyright 2012-2015 © www.yiibai.com	 粤ICP备12018498号-3</span>
	<span style="padding-left:18px;">联系：<img title="联系Email" src="../static/img/contact_mail.png"></span>	
</div>

		<!--
		<script type="text/javascript">
		/*文章右侧悬浮*/
		var cpro_id = "u1167141";
		</script>
		<script src="http://cpro.baidustatic.com/cpro/ui/f.js" type="text/javascript"></script>
		-->
	</body>
	<script type="text/javascript" src="http://www.yiibai.com/static/js/tutorial.js"></script>
</html>